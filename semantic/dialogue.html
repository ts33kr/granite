<!DOCTYPE html><html lang="en"><head><title>semantic/dialogue</title></head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"><meta name="groc-relative-root" content="../"><meta name="groc-document-path" content="semantic/dialogue"><meta name="groc-project-path" content="library/semantic/dialogue.coffee"><meta name="groc-github-url" content="https://github.com/ts33kr/granite"><link rel="stylesheet" type="text/css" media="all" href="../assets/style.css"><script type="text/javascript" src="../assets/behavior.js"></script><body><div id="meta"><div class="file-path"><a href="https://github.com/ts33kr/granite/blob/master/library/semantic/dialogue.coffee">library/semantic/dialogue.coffee</a></div></div><div id="document"><div class="segment"><div class="comments "><div class="wrapper"><p>Copyright (c) 2013, Alexander Cherniuk <a href="&#109;&#x61;&#105;&#108;&#x74;&#111;:&#116;&#115;&#51;&#51;k&#114;&#x40;&#x67;&#x6d;&#97;&#105;&#x6c;&#x2e;&#x63;&#x6f;m">&#116;&#115;&#51;&#51;k&#114;&#x40;&#x67;&#x6d;&#97;&#105;&#x6c;&#x2e;&#x63;&#x6f;m</a>
All rights reserved.</p>

<p>Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:</p>

<ol>
<li>Redistributions of source code must retain the above copyright notice, this
list of conditions and the following disclaimer.</li>
<li>Redistributions in binary form must reproduce the above copyright notice,
this list of conditions and the following disclaimer in the documentation
and/or other materials provided with the distribution.</li>
</ol>

<p>THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</p></div></div><div class="code"><div class="wrapper"><span class="nv">_ = </span><span class="nx">require</span> <span class="s">&quot;lodash&quot;</span>
<span class="nv">teacup = </span><span class="nx">require</span> <span class="s">&quot;teacup&quot;</span>
<span class="nv">assert = </span><span class="nx">require</span> <span class="s">&quot;assert&quot;</span>

<span class="p">{</span><span class="nx">Widget</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span> <span class="s">&quot;./abstract&quot;</span>
<span class="p">{</span><span class="nx">Archetype</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span> <span class="s">&quot;../nucleus/arche&quot;</span>
<span class="p">{</span><span class="nx">remote</span><span class="p">,</span> <span class="nx">cc</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span> <span class="s">&quot;../membrane/remote&quot;</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>This frontend widget implements a simple dialogue, rendered as a
modal window. The HTML markup (and therefore the exterior looks)
is driven by the Semantic-UI framework. The widget provides not
just the markup skeleton, but also some cultivation of dialogue
with the necessary events being emited and the required routine
for the usage and configuration being provided out-of-the-box.
Needs to be reconfigured with the service to satisfy the deps.</p></div></div><div class="code"><div class="wrapper"><span class="nv">module.exports.Dialogue = </span><span class="nx">cc</span> <span class="nf">-&gt;</span> <span class="k">class</span> <span class="nx">Dialogue</span> <span class="k">extends</span> <span class="nx">Widget</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Bring the tags definitions of the <code>Teacup</code> template engine
to the current class scope on the client and server sites.
Remember, that the <code>teacup</code> symbol is constantly available
on both sites, respecitvely. Also, take into consideration
that when you need a client-site template in the service,
this is all done automatically and there if no need for it.
Please see the <code>TemplateToolkit</code> class for more information.</p></div></div><div class="code"><div class="wrapper">    <span class="p">{</span><span class="nx">div</span><span class="p">}</span> <span class="o">=</span> <span class="nx">teacup</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>This prototype definition is a template-function driven by
the <code>Teacup</code> templating engine. When widget instantiated,
this defintion is used to render the root DOM element of
the widget and store it in the widget instance under the
instance variable with the same name of <code>element</code>. Please
refer to the <code>TemplateToolkit</code> class for an information.
Also, please refer to the <code>Teacup</code> manual for reference.</p></div></div><div class="code"><div class="wrapper">    <span class="nv">element: </span><span class="nf">-&gt;</span> <span class="nx">div</span> <span class="s">&quot;.ui.modal.dialogue-widget&quot;</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>The auto-runned method that uses algorithmic approach for
building the helpers for the dialogue. The helpers are an
HTML structure that supplements modal window with all parts
necessary to implement a dialogue. The implementation uses
the Semantic-UI modal window components to build a helpers
up. So the semantics of an HTML tree conforms entirely to.</p></div></div><div class="code"><div class="wrapper">    <span class="nv">assembleHelpers: </span><span class="nx">@autorun</span> <span class="nv">axis: </span><span class="o">+</span><span class="mi">102</span><span class="p">,</span> <span class="nf">-&gt;</span>
        <span class="vi">@negative = </span><span class="nx">$</span> <span class="s">&quot;&lt;div&gt;&quot;</span><span class="p">,</span> <span class="k">class</span><span class="o">:</span> <span class="s">&quot;ui negative button&quot;</span>
        <span class="vi">@positive = </span><span class="nx">$</span> <span class="s">&quot;&lt;div&gt;&quot;</span><span class="p">,</span> <span class="k">class</span><span class="o">:</span> <span class="s">&quot;ui positive button&quot;</span>
        <span class="nx">assert</span> <span class="nv">s = </span><span class="nf">(text) -&gt;</span> <span class="k">return</span> <span class="nx">$</span><span class="p">(</span><span class="s">&quot;&lt;span&gt;&quot;</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="nx">text</span><span class="p">)</span>
        <span class="nx">assert</span> <span class="nv">stop = </span><span class="nf">(e) -&gt;</span> <span class="k">try</span> <span class="nx">e</span><span class="p">.</span><span class="nx">stopImmediatePropagation</span><span class="p">()</span>
        <span class="nx">$</span><span class="p">(</span><span class="nx">@negative</span><span class="p">).</span><span class="nx">click</span> <span class="nf">(e) -&gt;</span> <span class="nx">stop</span> <span class="nx">e</span> <span class="k">if</span> <span class="nx">$</span><span class="p">(</span><span class="nx">@</span><span class="p">).</span><span class="o">is</span> <span class="s">&quot;.disabled&quot;</span>
        <span class="nx">$</span><span class="p">(</span><span class="nx">@positive</span><span class="p">).</span><span class="nx">click</span> <span class="nf">(e) -&gt;</span> <span class="nx">stop</span> <span class="nx">e</span> <span class="k">if</span> <span class="nx">$</span><span class="p">(</span><span class="nx">@</span><span class="p">).</span><span class="o">is</span> <span class="s">&quot;.disabled&quot;</span>
        <span class="nx">$</span><span class="p">(</span><span class="nx">@negative</span><span class="p">).</span><span class="nx">click</span> <span class="nf">(e) =&gt;</span> <span class="nx">stop</span> <span class="nx">e</span> <span class="k">unless</span> <span class="nx">@setInOrder</span><span class="p">()</span>
        <span class="nx">$</span><span class="p">(</span><span class="nx">@positive</span><span class="p">).</span><span class="nx">click</span> <span class="nf">(e) =&gt;</span> <span class="nx">stop</span> <span class="nx">e</span> <span class="k">unless</span> <span class="nx">@setInOrder</span><span class="p">()</span>
        <span class="nx">$</span><span class="p">(</span><span class="nx">@negative</span><span class="p">).</span><span class="nx">click</span> <span class="nf">(e) =&gt;</span> <span class="nx">@emit</span> <span class="s">&quot;negative&quot;</span><span class="p">;</span> <span class="nx">stop</span> <span class="nx">e</span>
        <span class="nx">$</span><span class="p">(</span><span class="nx">@positive</span><span class="p">).</span><span class="nx">click</span> <span class="nf">(e) =&gt;</span> <span class="nx">@emit</span> <span class="s">&quot;positive&quot;</span><span class="p">;</span> <span class="nx">stop</span> <span class="nx">e</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">negative</span><span class="p">.</span><span class="nx">prepend</span> <span class="nx">$</span><span class="p">(</span><span class="s">&quot;&lt;span&gt;&quot;</span><span class="p">).</span><span class="nx">html</span> <span class="nx">s</span> <span class="nx">@t</span> <span class="s">&quot;dismiss&quot;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">positive</span><span class="p">.</span><span class="nx">prepend</span> <span class="nx">$</span><span class="p">(</span><span class="s">&quot;&lt;span&gt;&quot;</span><span class="p">).</span><span class="nx">html</span> <span class="nx">s</span> <span class="nx">@t</span> <span class="s">&quot;confirm&quot;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">positive</span><span class="p">.</span><span class="nx">append</span> <span class="nx">$</span> <span class="s">&quot;&lt;i&gt;&quot;</span><span class="p">,</span> <span class="k">class</span><span class="o">:</span> <span class="s">&quot;checkmark icon&quot;</span>
        <span class="nx">assert</span> <span class="k">this</span><span class="p">.</span><span class="nv">title = </span><span class="o">=&gt;</span> <span class="nx">@headers</span><span class="p">.</span><span class="nx">text</span> <span class="nx">_</span><span class="p">.</span><span class="nx">head</span> <span class="nx">arguments</span>
        <span class="nx">assert</span> <span class="k">this</span><span class="p">.</span><span class="nx">positive</span><span class="p">.</span><span class="nx">addClass</span> <span class="s">&quot;right labeled icon&quot;</span>
        <span class="nx">assert</span> <span class="k">this</span><span class="p">.</span><span class="nx">actions</span><span class="p">.</span><span class="nx">append</span> <span class="nx">@negative</span><span class="p">,</span> <span class="nx">@positive</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">emit</span> <span class="s">&quot;configure-helpers&quot;</span><span class="p">,</span> <span class="nx">@element</span><span class="p">;</span> <span class="k">this</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>The auto-runned method that uses algorithmic approach for
building the skeleton of the dialogue. The skeleton is an
HTML structure that composes a modal window with all parts
necessary being already installed. The implementation uses
the Semantic-UI modal window components to build an window
up. So the semantics of an HTML tree conforms entirely to.</p></div></div><div class="code"><div class="wrapper">    <span class="nv">assembleSkeleton: </span><span class="nx">@autorun</span> <span class="nv">axis: </span><span class="o">+</span><span class="mi">101</span><span class="p">,</span> <span class="nf">-&gt;</span>
        <span class="nv">unConfigured = </span><span class="s">&quot;dialogue have to be configured&quot;</span>
        <span class="nx">assert</span> <span class="nx">@constructor</span><span class="p">.</span><span class="nx">$reconfigured</span><span class="p">,</span> <span class="nx">unConfigured</span>
        <span class="nx">assert</span> <span class="k">this</span><span class="p">.</span><span class="nv">headers = </span><span class="nx">$</span> <span class="s">&quot;&lt;div&gt;&quot;</span><span class="p">,</span> <span class="k">class</span><span class="o">:</span> <span class="s">&quot;header&quot;</span>
        <span class="nx">assert</span> <span class="k">this</span><span class="p">.</span><span class="nv">content = </span><span class="nx">$</span> <span class="s">&quot;&lt;div&gt;&quot;</span><span class="p">,</span> <span class="k">class</span><span class="o">:</span> <span class="s">&quot;content&quot;</span>
        <span class="nx">assert</span> <span class="k">this</span><span class="p">.</span><span class="nv">actions = </span><span class="nx">$</span> <span class="s">&quot;&lt;div&gt;&quot;</span><span class="p">,</span> <span class="k">class</span><span class="o">:</span> <span class="s">&quot;actions&quot;</span>
        <span class="nx">assert</span> <span class="k">this</span><span class="p">.</span><span class="nv">closing = </span><span class="nx">$</span> <span class="s">&quot;&lt;i&gt;&quot;</span><span class="p">,</span> <span class="k">class</span><span class="o">:</span> <span class="s">&quot;close icon&quot;</span>
        <span class="nx">assert</span> <span class="nx">_</span><span class="p">.</span><span class="nx">isObject</span> <span class="nv">cross = </span><span class="nx">@closing</span> <span class="c1"># the shorthand</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">element</span><span class="p">.</span><span class="nx">prepend</span> <span class="nx">@actions</span><span class="p">;</span> <span class="nx">@emit</span> <span class="s">&quot;set-actions&quot;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">element</span><span class="p">.</span><span class="nx">prepend</span> <span class="nx">@closing</span><span class="p">,</span> <span class="nx">@headers</span><span class="p">,</span> <span class="nx">@content</span>
        <span class="nv">cr = </span><span class="nf">(f) =&gt;</span> <span class="k">if</span> <span class="nx">f</span> <span class="k">then</span> <span class="nx">cross</span><span class="p">.</span><span class="nx">show</span><span class="p">()</span> <span class="k">else</span> <span class="nx">cross</span><span class="p">.</span><span class="nx">hide</span><span class="p">()</span>
        <span class="nv">cs = </span><span class="nf">(f) =&gt;</span> <span class="nx">@element</span><span class="p">.</span><span class="nx">modal</span> <span class="s">&quot;setting&quot;</span><span class="p">,</span> <span class="s">&quot;closable&quot;</span><span class="p">,</span> <span class="nx">f</span>
        <span class="nv">cf = </span><span class="nf">(o) =&gt;</span> <span class="nx">@emit</span> <span class="s">&quot;settings&quot;</span><span class="p">,</span> <span class="k">this</span> <span class="c1"># emit re-config</span>
        <span class="nx">assert</span> <span class="k">this</span><span class="p">.</span><span class="nv">show = </span><span class="o">=&gt;</span> <span class="k">return</span> <span class="nx">@element</span><span class="p">.</span><span class="nx">modal</span> <span class="s">&quot;show&quot;</span>
        <span class="nx">assert</span> <span class="k">this</span><span class="p">.</span><span class="nv">hide = </span><span class="o">=&gt;</span> <span class="k">return</span> <span class="nx">@element</span><span class="p">.</span><span class="nx">modal</span> <span class="s">&quot;hide&quot;</span>
        <span class="nx">assert</span> <span class="k">this</span><span class="p">.</span><span class="nv">toggle = </span><span class="o">=&gt;</span> <span class="nx">@element</span><span class="p">.</span><span class="nx">modal</span> <span class="s">&quot;toggle&quot;</span>
        <span class="nx">assert</span> <span class="k">this</span><span class="p">.</span><span class="nv">closable = </span><span class="nf">(f) =&gt;</span> <span class="nx">cs</span> <span class="nx">f</span><span class="p">;</span> <span class="nx">cr</span> <span class="nx">f</span><span class="p">;</span> <span class="nx">cf</span> <span class="nx">@</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">emit</span> <span class="s">&quot;configure-skeleton&quot;</span><span class="p">,</span> <span class="nx">@element</span><span class="p">;</span> <span class="k">this</span></div></div></div></div></body></html>